(rr-renv)=
# 再現可能な環境

(rr-renv-requireites)=
## 前提条件

| 前提条件                                                                     | 重要度    | メモ                                  |
| ------------------------------------------------------------------------ | ------ | ----------------------------------- |
| [コマンドラインでの経験](https://programminghistorian.org/en/lessons/intro-to-bash) | 必要な    | コマンドラインを介してソフトウェアをダウンロードする経験は特に便利です |
| {ref}`rr-vcs`                                                            | 役に立つもの | git や GitHub を使用した体験は役に立ちます         |

**推奨スキルレベル**: _中級-上級_

(rr-renv-summary)=
## Summary

すべてのコンピュータには、そのオペレーティングシステムからなる固有の計算環境 [{term}`def<Computational Environment>`] があります。 インストールされたソフトウェア、インストールされたソフトウェアパッケージのバージョン、および後述するその他の機能。 研究プロジェクトが1台のコンピュータで実行され、別のコンピュータに転送されたとします。 上記のいずれかの考慮事項に依存している場合、分析が同じ結果を実行または生成できる保証はありません。

研究を再現できるようにするために それが行われた計算環境は他の人が複製できるように捕獲されなければなりません 本章では,計算環境を捉えるためのさまざまな方法について解説し,その強みと弱みについて解説する.

### 計算環境とは?

大まかに言うと、計算環境はプログラムが実行されるシステムです。 これには、ハードウェアの機能(CPU内のコア数など)とソフトウェアの機能(オペレーティングシステムなど)が含まれます。 プログラミング言語、パッケージ、インストールされているソフトウェアの他の部分、およびそれらのバージョンと構成)。

ソフトウェアのバージョンは [セマンティック バージョニング](https://semver.org) によって定義されることが多い。 このシステムでは、ソフトウェアの各バージョンを定義するために、例えば、2.12.4 などの3つの数字が使用されます。 ソフトウェアに変更が加えられると、そのバージョンはインクリメントされます。 これらの3つの数字はパターン _MAJOR.MINOR.PATCH_に従い、次のようにインクリメントされます:

- *MAJOR*: 重要な変更
- *MINOR*: 機能を追加
- *PATCH*: バグ修正

(rr-renv-usefic)=
## これが便利な理由

計算環境がなぜ重要なのか例を見てみましょう。 とてもシンプルなPythonスクリプトを持っているとします。

```
a = 1
b = 5
print(a/b)
```

5 で割ったものは `0.2`で、スクリプトが Python 3 を使って実行された場合はこれが表示されます。 しかし、Python 2 のような若干古いバージョンの Python が使用されている場合、結果が出力されるのは `0` です。 これは、Python 2 で整数の除算が 整数に適用されるためです。 (通常の) 除算は Python 3 では整数を含むすべての型に適用されます。

したがって、この単純なスクリプトは、実行される計算環境によって異なる __ の回答を返します。 間違ったバージョンの Python を使うのは簡単です。 そして、完全に有効なコードの断片が 環境によって異なる結果をもたらす方法を実証しています。 そのような問題がこのような単純なスクリプトに影響する可能性がある場合。 複雑な解析手順には何千行ものコードと何十もの依存するパッケージが含まれているかを想像してみてください。

研究者は、彼らが研究を行っている計算環境を理解し、キャプチャする必要があります, それは3つの当事者に影響を与える可能性があります:

### 研究者

研究者の作業環境は、ソフトウェアの更新、新しいソフトウェアのインストール、異なるコンピュータへの移行とともに進化します。 プロジェクト環境が把握されていない場合、研究者は数ヶ月または数年後にプロジェクトに戻る必要があります(研究に共通するように)。 自信を持ってそうすることはできません 特定の研究環境がどのような変化が起きているのか、そしてそれらの変化がコードを実行する能力にどのような影響を与えるのかを知ることはできません。 そして結果についてです

### 共同編集者

多くの研究が現在共同で行われており、複数の異なる計算環境を研究することで、潜在的なバグの地雷原が開かれています。 この種の問題を解決しようとすると、しばしば時間がかかり、イライラすることがあります。計算環境の違いを研究者が理解する必要があるためです。 そしてその効果を知っています さらに悪いことに、いくつかのバグは検出されず、結果に影響を与える可能性があります。

### 科学

学術研究は過去10年間で著しく進化してきました 研究過程を捉えて普及させる方法についても同じことは言えない。 普及のための主な方法 - 学術的な出版 - 1660年代の科学雑誌の出現以来、ほとんど変わっていません。 これは、科学的な成果を検証、複製、および拡張するのにもはや十分ではありません。 研究プロセスのあらゆる側面を共有する必要性の認識が高まっているにもかかわらず。 今日の学術出版物は多くの場合基礎的な分析から 切り離されています そして重要なのは 計算環境です 再現性のある研究をするためには、研究者は、その結果だけでなく、含まれる分析全体を公開し、配布する必要があります。 解析は _mobile_ である必要があります。 計算の移動度は、定義、作成する能力として定義されます。 ワークフローが他の場所で実行できることを確信しながら、ワークフローをローカルに維持します。 本質的には、計算の可動性とは、ソフトウェアスタック全体を格納できることを意味します。 データファイルをライブラリのスタックを通して移動させてシステムからシステムへ確実に移動させます 展開可能な場所に限定された研究は、複製可能な範囲で即座に制限されます。

この章では、計算環境とコードをキャプチャ、保存、共有して、研究が再現できるようにする方法について説明します。
