(rr-renv-vm)=
# 仮想マシン

(rr-renv-vm-what)=
## 仮想マシンとは?

仮想マシン(VM)は、基本的に実行できるアプリとしてコンピュータ全体をパッケージ化します。 一例として 以下の図は、仮想の ubuntu マシンを実行している windows ラップトップ(左下隅の windows 検索ボタンに注意)のラップトップを示しています(オペレーティングシステムの出力端末に注意してください)。 VM を実行しているマシンは `ホスト マシン` と呼ばれます。

[VirtualBox](https://www.virtualbox.org/) や [Vagrant](https://www.vagrantup.com/)のようなソフトウェアを使用すると、ユーザーは任意の数のVMを作成して実行できます。 おそらく推測できるように、複数のVMを一度に実行させると、メモリのドレインになります。 したがって、複数のVMを実行できるからといって、必要なわけではありません。

```{figure} ../../figures/virtual-machine.png
---
name: virtual-machine
alt: 仮想マシンのスクリーンショット。
---

```

ユーザーは、VMを自由にダウンロード、インストール、バックアップ、および破壊することができます。そのため、再現可能な研究を共有するための魅力的なツールです。 研究では、しばしば特定のソフトウェアやシステム設定が必要になります。 研究者が自分のコンピュータ上で他人の作品を再現したい場合。 プロジェクトを実行するために必要な環境を変更することは、彼らの仕事に影響を与える可能性があります。 例えば、この章の {ref}`rr-renv-useful` セクションの中では、 Pythonの異なるバージョンを使用すると、解析の結果に予期しない変化が生じる方法を説明しました。 研究者が解析を再現するために更新されたバージョンの Python をインストールするとします。なぜなら、解析は更新されたバージョンにのみ存在する機能を必要とするからです。 そうすることによって、彼らは自分の仕事を危険にさらす。 VMはそのリスクを取り除きます。ダウンロードされたツールや設定が変更された場合は、VMにのみ影響を与え、再現者の研究を安全に保ちます。 誤ってVM内の何かを壊した場合、それを削除して別のものを作ることができます。 VMは実質的に隔離されたエリアです。

(rr-renv-vm-research)=
## 仮想マシンを使って再現可能な研究をする

仮想マシンは、それらを単一のファイルとしてエクスポートすることによって共有することができます。 別の研究者は、 [VirtualBox](https://www.virtualbox.org/) のような独自の仮想化ソフトウェアを使用してそのファイルをインポートし、VMを作成した人によって配置されたすべてのソフトウェアファイルと設定を含むVMのコピーを開くことができます。 したがって、実際には、彼らは自分自身でそれを設定するの痛みを伴うことなく、プロジェクトの動作バージョンを持っています。

(rr-renv-vm-research-settingup)=
### 仮想マシンの設定

まず、VMを生成するためのツールを選択します。 ここでは、広く使用されている [VirtualBox](https://www.virtualbox.org/) を選択します。 ダウンロードしてシステムにインストールします。 新しいマシンを作成するには、左上の「新規」をクリックします。 マシンの名前を入力し、使用するオペレーティングシステム(およびバージョン)を選択できるウィンドウが表示されます。 以下の図では、Ubuntuを実行している `demo_VM` というマシンが作成されています。

```{figure} ../../figures/vm-create-machine.png
---
name: vm-create-machine
alt: 仮想マシンを表示するスクリーンショットを作成します。
---

```

クリックすると、作成されるマシンの他の機能を調整することができます。たとえば、アクセスできるメモリ量などです。 デフォルトのオプションはほとんどの目的に適していますが、このプロセスではカスタマイズが可能です。

(rr-renv-vm-research-starting)=
### 仮想マシンの起動

仮想マシンを起動するには、左側のVMのリストからマシンを選択します。 上部にある緑色の `` 矢印をクリックします。

```{figure} ../../figures/vm-start-machine.png
---
name: vm-start-machine
alt: 仮想マシンの起動方法を示すスクリーンショット。
---

```

(rr-renv-vm-research-sharing)=
### 仮想マシンの共有

研究者は自分のVMで作業し、エクスポートすることができます。 VM をエクスポートするには、左上にある `ファイル` をクリックし、 `エクスポート` をクリックします。 これにより、共有できる単一のファイルとしてVMをエクスポートします。

```{figure} ../../figures/vm-export-machine.png
---
name: vm-export-machine
alt/仮想マシンのエクスポート方法を示すスクリーンショット。
---

```

Someone that has access to this file and VirtualBox installed just needs to click `File` in the top left, then `Import` to select that file. インポートされると、前述のように VM を起動できます。 上部の緑色の開始矢印をクリックしてメニューから選択します。
