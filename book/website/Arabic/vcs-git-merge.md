(rr-vcs-git-merge)=
# دمج الفروع في Git

(rr-vcs-merge-command)=
## `git دمج` الأمر

بمجرد الانتهاء من بعض الأعمال في الفرع وتكون على استعداد لدمجها في مشروعك الرئيسي (أو في أي فرع آخر)، يمكنك دمج الفرع الذي عملت عليه في الفرع الرئيسي أو أي فرع مستهدف آخر من اهتمامك. بإمكانك أيضاً أن تستخدم الدمج للجمع بين العمل الذي قام به أشخاص آخرون معك والعكس بالعكس.

لدمج الفرع، الفرع ألف، في فرع آخر، الفرع باء، قم بالتبديل إلى الفرع ألف بواسطة:
```
فرع الدفع Git
```
دمجها في الفرع باء بواسطة:

```
Git دمج فرع_B
```

الدمج لن يكون ممكنا إذا كانت هناك تغييرات في دليل العمل الخاص بك أو منطقة التجهيز التي يمكن كتابتها بواسطة الملفات التي تدمجها. إذا حدث ذلك، لا يوجد تضارب للدمج في الملفات الفردية. تحتاج إلى الالتزام أو حفظ الملفات التي تضعها ثم حاول مرة أخرى. رسائل الخطأ هي كما يلي:

```
خطأ: لم يتم تحديث الإدخال 'your_file_name'. لا يمكن الدمج. (تغييرات في دليل العمل)
```

أو

```
خطأ: سيتم استبدال الإدخال 'your_file_name' عن طريق الدمج. لا يمكن الدمج. (التغييرات في منطقة التجهيز)
```

(rr-vcs-merge-command-practice)=
### الممارسات الجيدة

أولاً وقبل كل شيء، يجب أن يكون الفرع الرئيسي الخاص بك **ثابتاً دائمًا**. فقط دمج العمل الذي يتم الانتهاء منه واختباره (على سبيل المثال في فرع مختلف). إذا كان مشروعك تعاونياً، ثم من الجيد دمج التغييرات التي يجريها الآخرون في عملك الخاص بشكل متكرر أو مشاركة التغييرات الخاصة بك مع المتعاونين معك. وإذا لم تقم بذلك في كثير من الأحيان، فمن السهل جدا دمج التنازعات التي تنشأ (القسم التالي).

(rr-vcs-merge-conflicts)=
## دمج التناقضات

عندما يتم إدخال تغييرات على نفس الملف في فروع مختلفة، قد تكون تلك التغييرات غير متوافقة أحيانا. ويحدث هذا في الغالب الأعم في المشاريع التعاونية، ولكنه يحدث أيضا في المشاريع المنفردة. قل أن هناك مشروع يحتوي على ملف بهذا السطر من الكود:

```
print('مرحبا بالعالم')
```

لنفترض أن شخصا واحدا، في فرعه، يقرر أن "يربط" قليلا، ويغير السطر إلى:

```
print('مرحبا بالعالم!!')
```

بينما يقرر شخص آخر، في فرع آخر، تغييره إلى:

```
print('مرحبا بالعالم'
```

وهم يواصلون العمل في فروع كل منهم ويقررون الاندماج في نهاية المطاف. ثم تمر برامجيات مراقبة النسخ الخاصة بها وتجمع التغييرات في نسخة واحدة من الملف؛ *ولكن*، عندما يصل إلى بيان `مرحبا بالعالم` ، فإنه لا يعرف أي الإصدار لاستخدامه. وهذا تنازع في الدمج: فقد أجريت تغييرات غير متوافقة على نفس الملف.

وعندما ينشأ نزاع في عملية الدمج، سيتم التبليغ به أثناء عملية الدمج. داخل الملفات التي بها تضاربات، سيتم وضع علامة على التغييرات غير المتوافقة حتى تتمكن من إصلاحها:

```
<<<<<<< HEAD
print('hello world!!!')
=======
print('Hello World')
>>>>>>> الرئيسية
```
`<<<<<<<`: يشير إلى بداية الخطوط التي كان لها تعارض في الدمج. المجموعة الأولى من الأسطر هي الأسطر من الملف الذي كنت تحاول دمج التغييرات فيه.

`=======`▪ يشير إلى نقطة التوقف المستخدمة للمقارنة. وهو يفصل التغييرات التي التزم بها المستخدم (أعلاه) عن التغييرات الناشئة عن الدمج (أدناه) للمقارنة البصرية.

`>>>>>>>`: يشير إلى نهاية الخطوط التي كان لها تعارض في الدمج.

تقوم بحل تعارض عن طريق تحرير الملف لدمج أجزاء الملف التي واجهت Git مشكلة في الدمج. وهذا قد يعني التخلي عن التغييرات الخاصة بك أو شخص آخر أو القيام بمزيج من الاثنين. سوف تحتاج أيضًا إلى حذف `<<<<<<<`، `======`، و `>>>>>>>` في الملف. في هذا المشروع، يمكن للمستخدمين أن يقرروا لصالح `مرحبا واحدا في العالم` على غيره. أو يجوز لهم أن يقرروا الاستعاضة عن النزاع بما يلي:

```
print('مرحبا بالعالم!!')
```

بمجرد أن تقوم بإصلاح الصراعات، ارسل النسخة الجديدة. لقد حللتم الصراع الآن. إذا كنت أثناء العملية، تحتاج إلى تذكير بماهية الملفات المتضاربة، يمكنك استخدام `git status` للتعرف.

إذا وجدت أن هناك تضاربات سيئة بشكل خاص، وترغب في إجهاض الدمج الذي يمكنك استخدامه:
```
دمج git --إجهاض
```

(rr-vcs-merge-conflicts-practice)=
### الممارسات الجيدة

قبل أن تبدأ بمحاولة حل المنازعات، تأكد من فهمك الكامل للتغييرات وكيف أنها غير متوافقة لتجنب خطر جعل الأشياء أكثر تشابكا. يمكن أن يكون الدمج بين الصراعات تخويفا لحلها، خاصة إذا كنت تتكامل مع الفروع التي اختلفت العديد من الالتزامات قبل ولديك الآن العديد من التناقضات. ومع ذلك، تجدر الإشارة إلى أن إصداراتك السابقة آمنة وأنه يمكنك إصلاح هذه المشكلة دون التأثير على الإصدارات السابقة. هذا هو السبب في أنه من الممارسات الجيدة **دمج تغييرات الآخرين في عملك بشكل متكرر**.

وهناك أدوات متاحة للمساعدة في حل الصراعات المدمجة، بعضها مجاني؛ وبعضها غير مجاني؛ وبعضها غير مجاني. ابحث عن شخص يعمل من أجلك واطلع عليه. أدوات الدمج الشائعة الاستخدام تشمل [KDiff3](http://kdiff3.sourceforge.net/)، [ما بعد المقارنة](https://www.scootersoftware.com/)، [Meld](http://meldmerge.org/)، و [P4دمج](https://www.perforce.com/products/helix-core-apps/merge-diff-tool-p4merge). لتعيين أداة كما تفعل افتراضيًا:

```
git config --الدمج العالمي.tool name_of_the_tool
```

واطلقه مع:

```
دمج git
```

ومن الناحية الأساسية، فإن أفضل طريقة للتعامل مع الصراعات المدمجة هي، قدر الإمكان، محاولة تجنبها في المقام الأول. يمكنك تحسين احتمالاتك على هذا من خلال الحفاظ على نظافة الفروع والتركيز على مشكلة واحدة و تضمين أكبر عدد ممكن من الملفات. قبل الدمج، تأكد من معرفة ما هو في كلا الفرعين. إذا لم تكن الشخص الوحيد الذي عمل في الفروع، ومن ثم ابقى خطوط الاتصال مفتوحة، لذا فأنت جميعا على دراية بما يفعله الآخرون.
