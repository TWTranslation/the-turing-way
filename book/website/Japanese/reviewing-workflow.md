(rr-reviewing-workflow)=
# 典型的なワークフロー

*この章にはGithubへの参照があります。*

```{figure} ../../figures/readable-code.jpg
---
height: 500px
name: readable-code
alt: この画像はコードの可読性の重要性を強調しています。
---
_Scriberiaによるチューリング方法_プロジェクトのイラスト。 CC-BY 4.0ライセンスの下で使用される。 DOI: [10.5281/zenodo.3332807](https://doi.org/10.5281/zenodo.3332807)
```

## Formal vs Informal Reviews

正式なレビュープロセスが効果的に動作するためには、プロジェクトが {ref}`バージョンコントロール<rr-vcs>` を使用していることが必須です。 しかしながら、コードのすべてのレビューが **非常に価値がある**、非公式またはアドホックアプローチを含むと述べています。 実際、このような非公式の「肩越し」のピアレビューは、高度に形式化されたレビューパイプラインにおいても重要な予備的要素を形成することができます。 大変なストレスを省いて正式なステージが始まったら議論するんだ

このセクションでは、 [Github](https://github.com/) 内で一般的に実装されている正式なレビュープロセスの背後にある典型的なワークフローに焦点を当てています。 [BitBucket](https://bitbucket.org/) や [GitLab](https://about.gitlab.com/) のような他のコーディング環境は概念的に似たメカニズムを持っている可能性がありますが、ここでは説明しません。

## コードを準備する

レビューを要求する前に、あなたが貢献しているプロジェクトの明白な品質のベンチマークをすべて満たしていることを確認してください。 これはレビューリストをチェックしたことを意味します(コーダーについては {ref}`チェックリストを参照してください<rr-checklist-for-code-review>`)。

査読者はこれらの事柄をチェックする必要があります (コーダーについては {ref}`チェックリストを参照してください<rr-checklist-for-code-review>`)。 しかし前線の欠陥は体系的ではなく 時々見落とされるべきです

## 変更を提案

GitHub システムでは、レビューは直接開始され、よく [pull request page](https://docs.github.com/en/free-pro-team@latest/github/collaborating-with-issues-and-pull-requests/creating-a-pull-request) からアクセスします。 レビューステップは、コーダーが自分の貢献が完了したと思っている点と、その貢献がプロジェクトのトランクコードにマージされる点の間で行われます。 単一のプルリクエストと密接に関連付けられています

Github環境では、特定のプルリクエストをマージする前に、プロジェクトを *レビューを* 必要に設定できます。 このオプションが選択されていない場合でも、保留中のプルリクエストに対して手動でレビューをリクエストすることは可能です (そして実際にはベストプラクティス)。

## レビューの作成とディスカッション

この時点で、審査プロセスを開始することができます。 Githubでは、レビュアーは一般的なコメントと行ごとのコメントの両方を提供することができます。 [GitHubコードレビュー](https://github.com/features/code-review) を参照してください。 各コメントはそれぞれのコメントスレッドになり、必要に応じて各問題についての議論を行うことができます。 この相互作用は、すべてのコメントについてコンセンサスに達することを可能にする必要があります。

レビューが完了したら、必要なコメントについて議論することができます。 次に、変更を行い、適切なコメントに対して行われた変更を記録します。 また、レビュー担当者が自分がレビューに完全に対処したと思っていることを知っていることを確認します。

変更が完了したら、レビューアは最初のコメントすべてに対処することを確認します。 必要に応じて、レビュー担当者は、コンセンサスを得るために特定のポイントに同意しない場合は、あなたと建設的に取り組んでいます。 ほとんどの場合、コンセンサスが見つからないかどうか最終的な意見があります。

レビュー後の変更がコードに加えられたら。 必要に応じてコメントを最終更新させてください何が行われたかの履歴と その背後にある推論を完了させます

## GitHubで結果を通信する

In Github, comments should be added in the `Files changed` section, so they can be attached to a particular line of code, see [GitHub reviewing changes in pullrequests](https://docs.github.com/en/free-pro-team@latest/github/collaborating-with-issues-and-pull-requests/reviewing-changes-in-pull-requests). 異なる問題を別々に保つことができるように、テキストの大きなボールではなく、このように多くの小さなコメントを作ります。 関連する場合は、既存の問題とドキュメントを参照してください。

変更ではなく、既存のコードを確認している場合でも、プルリクエストを使用すると便利です。 明らかな修正がある問題が見つかった場合は、通常の方法でパッチを使用してプルリクエストを送信できます。

修正がない場合は、該当する行に空のコメントを追加できます。 パッチとしてプルリクエストを作成します 関連する行は、プルリクエストの `ファイル` の概要に点灯し、そこにコメントを追加することができます。 この場合、プルリクエストはマージされません(ただし、コメントは他の方法で処理されます)。 または、追加のコメントは元に戻され、合意された修正によって置き換えられます。

GitHubのコードレビューのサポートはかなり限られているため、いずれの大きなものではなく、多くの小さなプルリクエストを提出してください。 単一のプルリクエストに問題が多すぎると、すぐに扱いにくくなります。

## 変更をマージ

レビュープロセスが完了すると、レビュー担当者は変更を承認し、マージが行われる可能性があります。 個々のプロジェクトには通常、コーダーまたはレビュアーが実際にマージボタンを押すかどうかについてのルールおよび/またはガイドラインがありますので、確認してください。 多くの場合、プロジェクトワークフローはレビューを完了させ、レビュー担当者によるサインオフをマージを実行する正式な前提条件とします。 疑いを避けるために、この原則を小規模または非公式のプロジェクトのためにも採用することはおそらく理にかなっています。
