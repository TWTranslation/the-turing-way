(rr-ci-practices)=
# ベストプラクティスと推奨事項

## 小規模で反復的な変更

継続的な統合を採用する際の最も重要な慣行の1つは、プロジェクトメンバーが小さな変更を行い、コミットすることを奨励することです。 小さな変更により、統合時の問題の可能性と影響が最小限に抑えられ、統合の時間と労力のコストが最小限に抑えられます。

## Trunkベースの開発

トランクベースの開発では、リポジトリのメインブランチで作業が行われるか、しばしば共有リポジトリにマージされます。 短命なフィーチャーブランチは、小さな変更を表し、できるだけ早くマージされる限り許容されます。

トランクベースの開発の背後にある考え方は、上記で述べた小さな反復的な変化の概念に違反する大きなコミットメントを避けることです。 コードは、スコープが小さいときに競合を解決できるように、ピアが早期に利用できます。

## 建物とテスト段階を速く保ちましょう

ビルドステップとテストステップを頻繁に実行する必要があるため、これらのプロセスを合理化して、かかる時間を最小限に抑えることが不可欠です。 ビルド時間の増加は、各コミットがビルドを開始するという事実によって影響が複雑になるため、大きな問題として扱われるべきです。

可能な場合、テストスイートの異なるセクションを並列に実行することで、パイプライン内のビルドをより速く移動させることができます。 各タイプの試験の割合が理にかなっていることを確認するためにも注意が必要です。 ユニットテストは通常非常に高速で、最小限のメンテナンスオーバーヘッドを備えています。 対照的に、自動化されたシステムまたは受入テストはしばしば複雑で、破損しやすくなります。 このことを考慮すると、ユニットテストに大きく依存することがよくあります。 かなりの数の統合テストを行い、その後、より複雑なテストを行います。

## 計算費用

いくつかのソフトウェアは、ビルドおよび/または実行に重要なコンピューティングリソースを必要とします。 例としては、気象モデルや気候モデルがあります。 これにより、テストに時間がかかりすぎたり、リソースが多すぎたりするため、継続的なインテグレーションを使用することは不可能になります。 したがって、不完全なテストのリスクと使用可能な開発プロセスのバランスをとるために妥協点を見つける必要があります。

一つのアプローチは、異なるレベルのテストを使用することであり、何が変更されているかによって異なるサブグループが必要になります。 一般的な幅広いサブグループは、すべてのケースで使用でき、特定のエリアをより詳細にテストするために追加のものが呼び出されます。 これは、テストプロセスに判断の要素を導入しますが、正常に適用することができます。

## 依存関係の追跡

依存関係の更新を定期的に確認する必要があります。 非推奨の機能に依存するコードによるバグを回避し、多くの時間を節約できます。 [David](https://david-dm.org/) のようなサービスは、依存関係管理のために利用可能です。

## パイプライン全体の整合性

プロジェクトは、パイプラインの開始時に一度構築する必要があります, 結果のソフトウェアは、再構築せずに保存され、後のプロセスにアクセスする必要があります. 各フェーズでまったく同じアーティファクトを使用することで 異なるビルドツールの結果として矛盾が生じていないことは確かです
