
(rr-code-reuse-details)=
# コードの再利用に関する詳細な推奨事項

あなた(または他の誰か)が同じことをするためにコードを再利用できることを確認してください。 このセクションには、ソフトウェアをより再利用可能にするための推奨事項のシンプルなチェックリストが含まれています。 このセクションでは、このガイドの他の関連する部分へのポインタとともに、これらの推奨事項のそれぞれについて詳しく説明します。

## Recommendations

この段階では、コードを開いて読み取る必要もないかもしれません。 必要なすべてのステップを再実行し、あなたが持っていたのと同じ結果を得ることができるようにしたいだけです。

### 1. 確認してください (スペースで)

コードは公開され、共同作業者と共有する必要があります。 誰もがそれを見つけてアクセスできるように、一意の永続的な識別子を持っています。

**See also**: {ref}`rr-vcs`

### 2. 見つけられることを確認してください（時間内）

コードの時間的進化は、バージョン管理によって記述されているのが理想です。 これにより、過去から特定のバージョンを取得できます。

**See also**: {ref}`rr-vcs`

### 3. 同じ一連の操作を実行できることを確認してください

多くの場合、環境を整える人間は、コードを書いた人であり、コードを再実行して結果を再現できるようにするために必要なステップの正確な順序を知っている人でもあります。 これは、別の人間がそれをやり直すために、きっと注意深く記録されるでしょう。

****: [再現可能な研究に関するCodeRefinery lesson](https://coderefinery.github.io/reproducible-research/)

### 4. あなたの環境と一連の操作が堅牢であることを確認してください。何が行われたかを再現するために人間は必要ありません。

人間に頼りたくない。 悪意がなくても間違いを犯す傾向があります。 したがって、必要に応じて環境をスクリプト化して再作成し、すべてのステップを接着するパイプラインスクリプトによってオペレーションのシーケンスを実行させることを望んでいます。 操作のシーケンスをスクリプト化することの良い副作用は、これがステップのドキュメントとして機能することが多いことです。

****: {ref}`rr-renv-options` も参照してください。

### 5. コードをライセンスしてください

あなたのコードにライセンスを添付し、人々がそれを再使用するときに引用する方法を指定してください。 再利用を可能にする許可ライセンスを使用することを検討してください。 また、ライブラリまたはソフトウェアのライセンスと互換性のあるライセンスを選択する必要があります。

**関連項目**: {ref}`rrr-licensing-Software`, {ref}`rr-licensing-software-permissive`, {ref}`rr-licensing-compatibility`

### 6. 引用可能であることを確認してください

人々がそれを再使用するときに、あなたがどのように引用されるかを指定することを確認してください。

**関連項目**: {ref}`cm-citable-cite-software`

### 7. 必要なデータを含める

ソフトウェアが任意の種類のデータに依存している場合、データが利用可能になるはずです。

****: {ref}`rr-rdm-data` も参照。

## 再実行可能な推奨事項

あなた(または他の人)があなたが行ったことを行うためにそれを再利用できることを確認してくださいが、異なるデータ/異なるパラメータを使用してください

### 1. ハードコードされたビットを削除し、コードをモジュール化する
コードにハードコードされたデータや解析パラメータに固有の詳細が必要ではありません。 何かが再利用可能な関数になれば、それをハードコードされたパラメータから分離し、それを自身で何か(再利用可能な)ものに変えることができる。 モジュールを純粋にします: 同じ入力が与えられた場合、純粋な関数は常に同じ値を返します。 スクリプト内でファイルパスを指定する代わりに、よりポータブルで一般的で再利用可能なスクリプトのコマンドライン引数として渡すことを検討してください。

**See also**: [CodeRefinery Modular Code Development lesson](https://cicero.xyz/v3/remark/0.14.0/github.com/coderefinery/modular-code-development/master/talk.md/#1)

### 2. 作成したモジュールは、さまざまな種類の入力データまたはパラメータを取ることができることをテストします
今後どのようにコードが再利用されるかまだわからないかもしれません。 しかしどのパラメータが許可されているかテストできれば 使用すべきでないことを防ぐことができます

****: [自動テストに関するCodeRefinery lesson](https://coderefinery.github.io/testing/motivation/)

### 3. モジュールをパッケージ/ツールボックスに変えます
プロジェクトの詳細を、他のプロジェクトや他の人が再利用できるビットで区切ってください。

**See also**: {ref}`rr-renv-package`, [Packaging Software](https://scicomp.aalto.fi/scicomp/packaging-software/), [Software packaging in Python](https://aaltoscicomp.github.io/python-for-scicomp/packaging/)

## ポータブル推奨事項
移植性とは、ソフトウェアを新しい環境に移行する能力を指します。 これは、同一の(同一ではない)マシンを指しますが、新しいハードウェアアーキテクチャ、オペレーティングシステムなどを参照することもできます。 これらはどちらもソフトウェアの再利用に重要です。

### 1. それが住んでいた環境を再現できることを確認してください
環境は、静かにコードに付随する時間の脆弱なスナップショットです。 ソフトウェアを操作した人間、データを準備するために人間がおこなった手順を含むことができます。 ハードウェア、OS、ライブラリ、外部パッケージ/ツールボックス/依存関係。 このすべてが、別の人間が同じ全ての正確なステップをやり直すために、注意深く記録することができます。

****: {ref}`rr-renv` も参照。

## 拡張可能で変更可能な推奨事項
他の人がコードを拡張して改善できるようにしてください。

### 2. 人間がコードを読み取れるようにしてください
多くの場合、他の人のためのコードを書くことができるように、彼らはそれを(あなたの未来の自己を含む)読むことができます。 不明瞭な変数名を持つ不可解なonlinerは、1つのライナーを読みやすい変数名で複数のステップに分割するよりも速く、効率的ではありません。 さらに、コーディング規約を使用すると、他の読者に役立ちます。

**See also**: {ref}`rr-code-style-and formatting`, {ref}`rr-code-quality-利点`

### 3. コメントがあることを確認してください
実際のコードを書く前にコメントを書く。 誰かがコメントを読んで、コメント間のコードビットをすべてスキップして、コード全体を読むように全体像を得ることができると想像してみてください。
