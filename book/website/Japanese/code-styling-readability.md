(pd-code-styling-readability)=
# 人間が読めるコードを書く

明確でよくコメントされ、読みやすく、再利用可能なコードを書くことは、あなただけでなく、あなたが開発しているコミュニティ(または聴衆)にとっても有益です。 これはあなたのラボ、外部の協力者、利害関係者、またはグローバルディストリビューション用のオープンソースソフトウェアを書いているかもしれません! どのようなスケールで働いても、読みやすさはカウントされます!

コードを他の人が読みやすくする際に考慮すべきいくつかの側面を紹介します。

## 行の長さ

コーディングラインの長さにはいくつかの合意があります。 PEP8は、Rスタイルガイドでは最大79文字、80文字を示唆しています。 これは、ラインが画面に容易に収まり、複数のコーディングウィンドウを開くことができることを意味します。 あなたのラインがこれよりも長いならば、あなたの機能はあまりにも複雑で、分離されるべきであると主張されます! これがRプログラミングのTidyメソッドの核心です これは、前のオブジェクトを次の関数に渡す特別な演算子 `%>%` を持っています 必要な文字数は減ります

```r
recoded_melt_dat <- read_csv('~/files/2019-05-17_dat.csv') %>%
recode() %>%
melt() #recoded_melt_dat と呼ばれる再コード化された溶けたデータファームがあります。
```

## コメント

コメントは、Psychopy の作成者であるJon Peirce によって"あなたの未来の自己への愛の手紙" として記述された。 コメントはブロックまたはインラインでブロックできます。  
PEP8 ガイドラインには、コメントをブロックすることは完全な文章であるべきという確固たる提案があります。 期間に続く2つのスペースがあり、日付付きのスタイルガイド(トランクとホワイト)に従ってください。 幸いなことに、スタイルの要素はもはや男性代名詞の不公平な強調を必要としません。 インラインコメントは慎重に使用する必要があります。 明確かつ簡潔なコメントを維持することで、あなたが行った意思決定を追跡することができます。 どのような変数が使われているのか他の人が思考過程を見ることができます コメントの構文はプログラミング言語によって異なります。 In R and Python, a hashtag is used, whereas in C and Java the brackets `/* /*` are used, and in C++/C# a double slash `//` comments single lines.

Pythonで:
```python
times = 10 # integer
my_variable = "my variable is %s times than yours" %times #my_variable to a string
print(my_variable) #print the value
```

R:
```r
my_func = function(number){ #R function

(number * 5) - 2
}
print(my_func(2))
```

より長いコメントのために、情報はコードブロックの上に含めることができます。 Python では、トリプル音声記号を括弧として使用できます。 これは、間に何かコメントアウトします。

```python
"""
The following function takes a number, multiplies it by 5, and subtracts 2.
これは無意味に見えるかもしれませんが、デモンストレーションのために簡単です。
"""
def myfunc(numb): #python function
      return((numb*5)-2)
print(myfunc(8))
```
コメントのより長いブロックは、R では使用できません。 文字列の設定や if(false) 文など、この回りには方法があります。

```r
"1 - これは文字列です。 Rでは評価されません。 そして、
と例外は発生しません。

if(false){
- すべてのコメントはここに移動でき、評価されることはありません。
また、80 文字の行の長さの候補を維持することを意味します。
また、RStudio では、if ステートメントの
行番号の横にある矢印を使用してコメントを折り返すことができます。
}
```

または、個々の行をコメントアウト:

```r
#これは非常に長いコメントです
#多くの行をカバーしています。
```
おそらく、IDEにはブロックをコメントアウトするためのキーボードショートカットがあります。

## インデックス

R スタイルガイドでは、線を区切る必要があることを示唆しています:
```r

  に 2 つのスペース
```
そしてそうではありません
```r
 
   タブ
    とスペースの混合
。
```

明らかに、関数の引数は80文字をはるかに拡張することができます。 この場合、2 行目は引数の開始までインデントすることを推奨します。

```r
my_variable <- a_realy_long_function(data = "2019-05-17_Long_File_Name_2",
                                      header = TRUE, verbose = TRUE)

```

これらはもちろんガイドラインに過ぎず、コーディングスタイルに合った要素を選択する必要があります。 しかし、再び、それはあなたがコラボレーションするときに一貫性があることを確認し、一般的なスタイルに同意することが重要です。 あなたのコーディングスタイルを記述するreadmeファイルを作成すると、コラボレーターやコントリビューターがあなたのリードに従うことができるように便利です。

### ...終了 ...終了  ...または end.\\n

テキストファイルを共有したり、マニュアルやドキュメントで共同作業を行っている場合。 空間を1つや2つ使うかどうかについては論争が続いています Markdownを使用する場合は、各文の後に新しい行を含めることがより明確になります。 この章(そして、この本のほとんどは、すべてではないにしても)は、生のテキストを読みやすくするすべての文の後に新しい行を持っています。 間隔の問題を見直して解決します。

```{figure} ../../figures/xkcd1285.png
---
height: 500px
name: xkcd1285
alt: 異なるフラグと戦いを持つ2つのグループ 1つは「ピリオド後の2つのスペース」、もう1つは「ピリオド後の1つのスペース」と言います。 「すべての文の後に改行」と書かれた旗を持っている人がいます
---
*各文の後に改行すると、確認やコメントが簡単になります - [XKCD Link](https://www) xplainxkcd.com/wiki/index.php/1285:_Third_Way)*
```
