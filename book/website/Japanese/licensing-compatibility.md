(rr-licensing-compatibility)=
# ライセンスの互換性

プログラムで複数の外部コンポーネントを使用している場合、結合作業のライセンスに複数の異なる制約が生じる可能性があります。 これらの制約が矛盾する場合、結果を合法的に配布することはできません(独占的なソフトウェアが関与している場合)。 合法的に合法的には作れないかもしれません)

2つのライセンスが組み合わされた作業のライセンスに互換性のない制約を指定する場合、それらは _互換性がありません_。

例えば、GNU GPL は独占的ライセンスと矛盾します。 GPLの下で組み合わされた作業をライセンスする必要があるため、追加の制限はありません。 独占的なライセンスの下で作業の一部を持つことは、そのような追加の制限です。 ですから、そのような組み合わせを配布することはできません (GPL コードの著作権者が特別な許可を与えている場合を除きます)。

問題を解決するためにソフトウェアの異なる部分を一緒に使用する場合 結果を広げたいと思うのは答えなければならない質問です

- そこにはどの作品があり、何から派生しているのか?
- 派生物を配布することはできますか? ライセンスはこれを許容し、互換性がありますか?
- ワークはどのようにライセンスされるべきですか?

次のセクションでは、これがどのように行われるかをいくつか説明します。

(rr-licensing-compatibility-examples)=
## 例

このセクションの多くの例は [xtas](http://xtas.net) に関係しています。 xtasは多くのサードパーティ製ライブラリを再利用するPython用の自然な言語処理ツールキットです。 したがって、さまざまな優れた例を提供します。

```{figure} ../../figures/xtas-overview96.png
---
name: xtas-overview96
alt: xtasのグラフィカルな概要。 大きな長方形は、ワークxtasを表します。 この長方形の中には、xtas Python コードを表す広い低い長方形があります。Apache License v2 の下でライセンスされています。 この下には、xtasで使用されているそれぞれPythonライブラリ、ソフトウェア、およびデータを表す3つのサイドバイサイドの正方形があります。 Python ライブラリの正方形には、3 つのボックスがあります。 最初のボックスには、「BSD」、「MIT」、「ALv2」という単語が含まれています。 2番目のボックスには「LGPLv2.1」が含まれています。 3つ目のボックスには「GPLv2+」が含まれています。 ソフトウェア広場には、4つのボックスがあります。 最初のボックスには「Webサービス」が含まれています。 2番目のボックスには「LGPL v2.1+」が含まれています。 3番目のボックスには「Researchのみ」があり、4番目のボックスには「GPL 2+/3+」が含まれています。 データ四角には、4つのボックスが含まれています。 最初のボックスには「CC BY-SA 3.0」が含まれています。 2番目の箱には「研究のみ」が入っています。 3番目のボックスには「ライセンスなし」が含まれており、4番目のボックスには「CoNLL'02 のみ」が含まれています。
---
xtasのグラフィカルな概要。
```

xtas自体はPythonで書かれており、一般的なフリーライセンスの下でライセンスされている多くのPythonライブラリを使用しています。 これらには、単純な BSD と MIT ライセンス、パーミッシブ Apache ライセンス バージョン 2 が含まれています。 (ALv2)、GNU Lesser General Public License version 2.1 (LGPLv2.1)、GNU General Public License version 2以降(GPLv2+)。

(GPLv2+ Python ライブラリへの依存は非推奨であることに注意してください。 しかしこれらの例のためにはまだそこにあると仮定します)

xtasのPythonコードは、Apache License 2.0の下で配布されています。 xtas著者が著作権を所有しているので、 彼らはそれを好きな方法でライセンス供与することができます(GPL依存に関してはグレーの領域がありますが、下記参照)。 xtasの著者は、組み合わせた作品やバイナリを配布していませんが、以下の例ではあります。 それがどのようにライセンスされるべきかを考慮するために、複合的な作業があると仮定します

以下の例では、これのほとんどを単純化し、1つまたはいくつかの依存関係を順番に見ていきます。

(rr-licensing-compatibility-examples-apachevsbsd)=
### Apache と BSD

```{figure} ../../figures/xtas-snowball96.png
---
name: xtas-snowball96
alt: xtas-vs. Snowballの例のイラスト。  大きな長方形は、ワークxtasを表します。 この長方形の中には、xtas Python コードを表す広い低い長方形があります。Apache License v2 の下でライセンスされています。 その下には、"Snowball Stemmer" と "Python lib BSD" という単語を含む正方形があります。
---
xtas vs. Snowballの例のイラストです。
```

xtasは、Pythonベースのステミングライブラリである [Snowball](https://snowballstem.org/)を使用しています。 Snowballは3節のBSDライセンスの下で公開されています。 xtasとSnowballのみを考慮すると、次の3つの質問に答えることができます。

#### そこにはどの作品があり、何から派生しているのか?

Snowball、xtasのPythonコード、組み合わせたxtaの3つの作品があります。 組み合わせた作品は、SnowballとxtasのPythonコードから派生したもので、どちらも独立した作品です。

ALv2とLGPL v2に注意してください。 ライブラリと組み合わせて動作するように意図されているソースコードは、派生的な作業ではないと明記してください。 2進数は(静的または動的に)結合されています。 GPLを含む他のライセンスは、これに関して明示的な声明を出さない。

私の知る限りでは、これにはケース法はありません。これらの例ではケース法とみなします。

#### 派生物を配布することはできますか? ライセンスはこれを許容し、互換性がありますか?

スノーボールは許諾ライセンスの下でライセンスされています。 そのライセンスの下で再配布することができ、派生作品のライセンスには制約がありません。 xtasの著者は、彼らが望む任意の方法でそれをライセンスすることができます。

#### ワークはどのようにライセンスされるべきですか?

xtas Python コードと xtas を組み合わせた作業は Apache ライセンス v2.0 の下でライセンスされています。

xtas著者がSnowballを再配布する場合は、Snowball著者によって付与されたBSDライセンスの下で行う必要があります。 (彼らは著作権を所有していないので、スノーボールに対して追加の許可を与えることはできませんし、追加の制限は同じ理由で強制できません。

(rr-licensing-compatibility-examples-apachevslgpl)=
### ApacheとLGPLの比較

```{figure} ../../figures/xtas-chardet96.png
---
name: xtas-chardet96
alt: xtas vs chardetの例の図。 大きな長方形は、ワークxtasを表します。 この長方形の中には、xtas Python コードを表す広い低い長方形があります。Apache License v2 の下でライセンスされています。 その下には、"chardet" と "Python lib LGPLv2.1" という単語を含む正方形があります。
---
xtas vs. chardetの例を示します。
```

xtasは、テキストの文字列で使用される文字セットを検出するためのPythonライブラリである [chardet](https://pypi.org/project/chardet/)を使用します。 Chardet は GNU Lesser General Public License v2.1 の下で公開されています。 xtasとchardetのみを考慮すると、以下の3つの質問に答えることができます。

#### そこにはどの作品があり、何から派生しているのか?

chardet、xtasのPythonコード、そして組み合わせた作業の3つの作業があります。 組み合わせた作業は、chardetとxtasのPythonコードから派生します。 その他は独立した作品である。

#### 派生物を配布することはできますか? ライセンスはこれを許容し、互換性がありますか?

Chardetは脆弱なコピーレフトライセンスの下でライセンスされているので、そのライセンスの条項の下で再配布することができます。 派生物は、あらゆるライセンスの下でライセンスされることができます。 しかしながら、LGPL v2.1 は、受信者がライブラリを変更し、修正したライブラリを派生的な作業とともに使用することができる(そして許可される)ことを要求します。

#### ワークはどのようにライセンスされるべきですか?

xtas 全体と xtas Python コードは、どのような方法でもライセンスすることができるので、彼らは Apache ライセンス v2.0 を使用しました。 彼らが chardet を配布する場合、彼らはその著作権所有者によって付与された LGPL v2.1 ライセンスの下で行わなければなりません。

(rr-licensing-compatibility-examples-apachevsgplv2)=
### Apache 対 GPLv2

```{figure} ../../figures/xtas-unidecode96.png
---
name: xtas-unidecode96
alt: xtas と unidecode の例の図。 大きな長方形は、ワークxtasの組み合わせを表します。 この長方形の中には、xtas Python コードを表す広い低い長方形があります。Apache License v2 の下でライセンスされています。 その下には、"unidecode" と "Python lib GPLv2+" という単語を含む正方形があります。
---
xtas vs. unidecode の例を示します。
```

xtasは以前、 [unidecode](https://pypi.org/project/Unidecode/)を使用しました。これは、Unicode® Standardに従ってエンコードされたテキストをASCII近似に変換するためのPythonライブラリです。 Unidecode は GNU General Public License バージョン 2 以降(GPLv2+) の下で公開されています。 xtasとunidecodeのみを考慮すると、以下の3つの質問に答えることができます。

#### そこにはどの作品があり、何から派生しているのか?

3つの作業があります: unidecode, xtas Python コード, そして、組み合わせた作業です。 これらの組み合わせは、unidecode と xtas Python コードに由来します。

xtas Python コードが unidecode の派生的な作業であるかどうかは、法律によって明確に定義されていません。 これには事件法がありません Apache ライセンスと LGPL は、それらのライセンスの目的ではないと明示的に述べています。 しかし、GPL にはそのような条項は含まれていません。

これらは個別に開発されており、xtasコードにunidecodeからのコードはありません。 ここでは派生的な仕事ではないと仮定します

#### 派生物を配布することはできますか? ライセンスはこれを許容し、互換性がありますか?

Unidecode は強力なコピーレフトライセンスの下でライセンスされているので、そのライセンスの条件の下で再配布されます。 派生物は、同一のライセンスの下でライセンスされなければなりません。

Unidecode は GPL バージョン 2 以降でライセンスされています。 これは _disjunctive license_ として知られています。 unidecode の著作権者は誰でも、GPLv2 ライセンスだけでなく、GPLv3 ライセンスも提供します。 そして将来作成されるかもしれないGNU GPL のそれ以降のバージョンでさえも積極的に。 潜在的なユーザーは、これらのライセンスのいずれかを受け入れることができます。 作品を複製したり派生作品を作ったりしたいのです

#### ワークはどのようにライセンスされるべきですか?

xtasの著者がunidecodeを配布する場合、彼らはGPLバージョン2以降の下でそうするべきです。 他人のコードから任意にライセンスを削除するのは意味がありません 組み合わせた作業のxtaは、同じライセンスまたはそれらのサブセットの下で配布する必要があります。 xtas Python コードは、任意の方法でライセンスされることができます。

xtasの著者は、xtas Pythonコードのライセンスを選択する必要があります。それは、unidecodeが配布できるライセンスの少なくとも1つと互換性があり、他の人が組み合わされた作品を組み立てて配布できるようにします。 ALv2 は GPLv3 と互換性があります(技術的な理由により、GPLv2 とは互換性がありません)。

組み合わせた作業は、GPL バージョン 3 以降でライセンスされる必要があります。 GPLv2の下でも使用できることが重要である場合。 xtas の著者は xtas Python コードを ALv2 と GPLv2 の両方の下でライセンスすることができます (意味: 彼らは両方のライセンスを提供し、ユーザーはどちらかまたは両方を受け入れることができます)、そしてGPLバージョン2以降の下での組み合わせ作業。

最後に、xtas Python のソースコードは unidecode の派生的な作業であることが後で決定されるかもしれません。 unidecode のいずれも作品に含まれていなくても、 xtasの著者は、xtasのPythonコードをunidecodeが配布されているGPLライセンスの少なくとも1つの下に配布しなければなりません。 その場合、これらは ALv2 と GPLv2+ のライセンスセットの下で xtas を提供することができます。

最も簡単な解決策は、単純に xtas Python コードと GPLv3 の下で派生した作業をライセンスすることです。

おそらく今までにはっきりしているように。 コピーレフトの強いライセンスの下にある依存関係は、ソフトウェアに基づいて独占的な作品を作れるようにしたい場合、あなたの人生を複雑にします。

(rr-licensing-compatibility-examples-apachevsall)=
### Apache vs BSD vs LGPL vs GPLv2

```{figure} ../../figures/xtas-all-python-libs96.png
---
name: xtas-all-python-libs96
alt: xtasとすべてのPythonライブラリの例のイラスト。 大きな長方形は、ワークxtasを表します。 この長方形の中には、xtas Python コードを表す広い低い長方形があります。Apache License v2 の下でライセンスされています。 この下には三つの正方形があります。 最初の正方形には "Snowball" と "Python lib BSD" という単語が含まれています。 2 番目の正方形は "chardet" と "Python lib LGPLv2.1" です。 3 番目の正方形には、"unidecode" と "Python lib GPLv2+" という単語が含まれています。
---
xtaとすべてのPythonライブラリの例を示します。
```

ここでは、上記の3つの例すべてを同時に検討します。

#### そこにはいくつの作品があり、何から派生しているのでしょうか?

Snowball, chardet, unidecode, xtas Python コード, xtas を組み合わせた作品の5つがあります。 組み合わせた作業は、そのすべての構成要素から派生します。

#### 派生物を配布することはできますか? ライセンスはこれを許容し、互換性がありますか?

xtas 以外の 4 つのコンポーネントはフリーソフトウェアライセンスの下にあり、xtas の作者は xtas Python コードの著作権を所有しています。 つまり5つの部品は全てxta作家によって配布できます BSD, LGPLv2. そしてGPLv2+はGPLバージョン2以上で組み合わせた作業をライセンス許諾することを許可しています。 少なくとも1つのライセンスがあります

#### ワークはどのようにライセンスされるべきですか?

xtas Python コードは、Apache License v2 の下でライセンスされ、GPL バージョン 3 以降で組み合わされた動作でライセンスされる必要があります。 (上記の {ref}`の Unicode の例 <rr-licensing-compatibility-examples-apachevsgplv2>` を参照してください。


### 外部プログラムに発信

xtasはJavaで書かれ、GNU GPLバージョン3以降で配布されている [スタンフォードのCoreNLPプログラム](https://stanfordnlp.github.io/CoreNLP/)を実行することができます。 ユーザーが対応する xtas 関数を呼び出すと、CoreNLP は xtas によって開始されます。 ユーザーの入力はパイプを介して送信され、CoreNLP出力はユーザーに返されるか、さらに処理されます。

```{figure} ../../figures/xtas-corenlp1-96.png
---
name: xtas-corenlp1-96
alt: xtas と CoreNLP の例の図。 正方形は、組み合わせた作業 xtasを表します。 この正方形の中には、xtas Python コードを表す広い低い長方形があります。Apache License v2 の下でライセンスされています。 その下には、"Stanford CoreNLP" と "Java プログラム GPLv3+" という単語を含む正方形があります。
---
xtas vs. CoreNLP 例の例です。
```

この状況の解釈としては、ライブラリ内で関数を呼び出すことと、xtasのどの配布とも変わらないということです。 ですから、CoreNLPを含む全体として、GPLv3+の下にあるべきです。 この解釈に貢献することは、必要に応じてxtasがCoreNLPを自動的にダウンロードしてインストールするという事実です。

```{figure} ../../figures/xtas-corenlp2-96.png
---
name: xtas-corenlp2-96
alt: xtas と CoreNLP の例の別の図。 左側の正方形は、組み合わせた作業xtaを表します。 この正方形には、xtas Python コードを表す長方形があり、Apache License v2 の下でライセンスされています。 右側はCoreNLPを表す別の正方形で、"Stanford CoreNLP" と "Java プログラム GPLv3+" のテキストがあります。 正方形の間には2つの矢印があり、1つはxtaからCoreNLPまでを指す上部に、1つはCoreNLPからxtaまでを指す下部にあります。
---
xtas vs. CoreNLP 例のもう一つの例です。
```

別の解釈としては、xtas と CoreNLP は別々の作品であり、xtas は CoreNLP とその標準的なユーザーインターフェイスを介して通信するだけであるということです。

この解釈では、xtasはユーザーがPython言語からCoreNLPプログラムを使用するのに役立つ別個のプログラムです。 CoreNLPの派生物ではありません ここではパッケージインストーラとコマンドシェルと同様に xtas を考えることができます。 それは明らかにインストールされたパッケージや始めたプログラムの派生的なものではありません

この解釈の下で (CoreNLPを含まない) 全体として xtas は任意のライセンスの下で配布することができます (もちろん他の依存関係によって課される制限に従います)。

実際には、xtas の作者は CoreNLP をまったく配布しません。それらは xtas Python コードを Apache License version 2 の下でのみ配布します。


### GPLv3 vs 独占ライセンス

この例では、 [OpenIFSの全球循環モデル](https://confluence.ecmwf.int/display/OIFS) と [DALESの大渦シミュレーションモデル](https://github.com/dalesteam/dales) を組み合わせたいと考えています。 これらのモデルはどちらもライブラリとして利用可能であるため、プロジェクトではOpenIFSとDalesのライブラリを単一のプログラムに組み合わせる必要があります。

(これは簡単な例ですが、このプロジェクトの現実は、ノッチまたは2つ以上の複雑なものです。 以下は私たちがしていることではありません)

OpenIFSライブラリ(ECMWF気象モデルコードの一部)は、プログラムの実行とプライベートな変更を可能にする独占的なライセンスの下で利用可能です。 プログラムや派生物の配布は許されていません DALESはGPLバージョン3で公開されています。

#### そこにはいくつの作品があり、何から派生しているのでしょうか?

OpenIFS、DALES、私たちが書いたプログラムの残りの部分、そしてそれらすべての組み合わせの4つの作品があります。 組み合わせた作業は、その構成要素に由来します。

#### 派生物を配布することはできますか? ライセンスはこれを許容し、互換性がありますか?

OpenIFSライセンスは再配布を許可していないため、配布できません。 DALESはGPLv3の下で配布できます。 残りのプログラムは私たちによって書かれており、必要に応じて私たちによってライセンスされることができます。

OpenIFSが組み込まれているため、全体の作業を配布することはできません。 もしOpenIFSが含まれていなければ、DALESの依存性のためにGPLv3の下で配布されなければなりません。

#### 私たちはこれを個人的に行うことができますか?

GPLは、変更されたソフトウェアがまったく配布されていない場合には、それによってカバーされるソフトウェアのプライベートな変更を、制限なしに行うことを可能にします。 OpenIFSライセンスでは、プライベート修正も可能です。 そのため、ライセンスに違反することなく、このプロジェクトに取り組むことができます(そして、組み合わせた作業を準備して実行する)。 結果を誰とも共有しない限りはね

しかし、組織外の人と協力したい場合は、異なる法人間で資料を交換し、分配としてカウントされることを意味します。 私たちは、独自のコード(ALv2の下で公然と公開することさえできます)とDALESを使用してそれを行うことができます。 しかし、OpenIFSや組み合わせた作品はありません。

#### このような状況では、他にどのような選択肢がありますか?

システムを別々のプロセスで動作させ、よく文書化された汎用インターフェイス上で相互に通信する独立したプログラムに分割することができます。 このように、情報を交換するいくつかの独立した作品だけを組み合わせた作品はないだろう。 しかし、単一の作品ではなく、プログラムがどのように分離されているのかは不明である。

また、OpenIFSとDALESの著作権者に、私たちの組織と外部の間で組み合わせた作品を共有する許可を求めることもできます。 それはすべての不確実性を取り除くでしょうが、一般的に実用的ではないかもしれません。

別のオプションは、依存関係のいずれかを私たちが書くもので置き換えることです。 これは通常非現実的です, 両方の時間の制約に起因し、新しいバージョンは、既存のものの科学的な系統を持っていないので.

ここでの根本的な問題は、GPLが私たちが使用するソフトウェアのすべての人に共有させようとすることです。 独占的なソフトウェアは単一の所有者の手に支配を維持しようとします

単一のプロジェクトでそれらを組み合わせることは複雑であり、法的リスクなしではありません、あなたはそれを避けるべきです。 それができない場合は、慎重に歩くべきです。
